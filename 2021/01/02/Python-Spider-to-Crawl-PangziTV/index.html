<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Python Spider to Crawl PangziTV - BestBonBai</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BestBonBai"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BestBonBai"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="use python to crawl TV, movies, and photos…  Web spiderThe project is to learn how to crawl info by python.  GitHub link of the code    PangziTV top movies download   finish download image and link a"><meta property="og:type" content="blog"><meta property="og:title" content="BestBonBai&#039;s Studio"><meta property="og:url" content="https://bestbonbai.github.io/"><meta property="og:site_name" content="BestBonBai&#039;s Studio"><meta property="og:description" content="use python to crawl TV, movies, and photos…  Web spiderThe project is to learn how to crawl info by python.  GitHub link of the code    PangziTV top movies download   finish download image and link a"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://bestbonbai.github.io/img/linglong.jpg"><meta property="article:published_time" content="2021-01-02T12:36:31.000Z"><meta property="article:modified_time" content="2021-01-09T02:47:13.054Z"><meta property="article:author" content="BestBonBai"><meta property="article:tag" content="Python"><meta property="article:tag" content="Spider"><meta property="article:tag" content="Crawl"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/linglong.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/"},"headline":"BestBonBai","image":["https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201807201532040514.png","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201808211534800972.png","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201806191529378940.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201812261545763914.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201901201547929676.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15748790550.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201709011504241064.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15513122621.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15514658765.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15547724202.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201811011541022964.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201712191513658576.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201807211532113573.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15646830571.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15632576354.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/156171055418.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201812271545869558.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201906291561744723.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201901091546974415.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201712011512104966.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201701241485229337.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/156400224713.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201711221511329603.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201903021551474745.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201803021519968421.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15646830780.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201812111544480404.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/15501778230.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201906291561743868.jpg","https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/201707291501306951.jpg"],"datePublished":"2021-01-02T12:36:31.000Z","dateModified":"2021-01-09T02:47:13.054Z","author":{"@type":"Person","name":"BestBonBai"},"description":"use python to crawl TV, movies, and photos…  Web spiderThe project is to learn how to crawl info by python.  GitHub link of the code    PangziTV top movies download   finish download image and link a"}</script><link rel="canonical" href="https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/"><link rel="icon" href="/img/favicon.ico"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-Q848JQW8F1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-Q848JQW8F1');</script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/bai-logo2.png" alt="BestBonBai" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/friend">Friend</a><a class="navbar-item" href="/message">Message</a><a class="navbar-item" href="/self-talking">Self-talking</a><a class="navbar-item" href="/music">Music</a><a class="navbar-item" href="/media">Media</a><a class="navbar-item" href="/404Charity">404Charity</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Join Gitter" href="https://gitter.im/hexo-theme-amazing/community"><i class="fab fa-gitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/BestBonBai"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-02  <a class="commentCountImg" href="/2021/01/02/Python-Spider-to-Crawl-PangziTV/#comment-container"><span class="display-none-class">279114bd0f43d2669cb0e14ce3f672f5</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="279114bd0f43d2669cb0e14ce3f672f5">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>14 m  <i class="fas fa-pencil-alt"> </i>2.1 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">Python Spider to Crawl PangziTV</h1><div class="content"><blockquote>
<p>use python to crawl TV, movies, and photos…</p>
</blockquote>
<h2 id="Web-spider"><a href="#Web-spider" class="headerlink" title="Web spider"></a>Web spider</h2><p>The project is to learn how to crawl info by python.</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/BestBonBai/bai-python-spider/tree/master/web_spider">GitHub link of the code</a></p>
</li>
<li><p><input disabled="" type="checkbox">  PangziTV top movies download</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> finish download image and link and movies list</li>
<li><input checked="" disabled="" type="checkbox"> create a markdown file to show the movies list and links</li>
<li><input checked="" disabled="" type="checkbox"> save images of movies</li>
<li><input checked="" disabled="" type="checkbox"> trying to download movies (finished)<ul>
<li>see <a target="_blank" rel="noopener" href="https://github.com/BestBonBai/bai-python-spider/blob/master/web_spider/pangzi_tv_spider_v2.py">pangzitv spider version 2</a><a id="more"></a>
<h2 id="Install-instruction-for-Mac"><a href="#Install-instruction-for-Mac" class="headerlink" title="Install instruction for Mac"></a>Install instruction for Mac</h2></li>
</ul>
</li>
</ul>
</li>
<li><p>using code <code>sudo python3 -m</code> before pip codes to install requests lib in python 3 instead of default python 2 in Mac</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo python3 -m pip install requests</span><br><span class="line">sudo python3 -m pip install beautifulsoup4</span><br><span class="line">sudo python3 -m pip install lxml</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Attention</strong>:</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> some files need to set privilege of read &amp; write for specific user!!!</li>
<li><input checked="" disabled="" type="checkbox"> some <strong>bugs</strong> are <code>tab &amp; space</code> issues in <strong>vscode</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>copy</strong> python file in your dir (such as <code>Hexo blog dir</code>) and change it to run.</li>
</ul>
</li>
</ul>
<h2 id="Don’t-forget-to-fake-headers"><a href="#Don’t-forget-to-fake-headers" class="headerlink" title="Don’t forget to fake headers"></a>Don’t forget to fake headers</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">        <span class="comment"># fake a browser</span></span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(url, headers=headers)</span><br></pre></td></tr></table></figure>

<h2 id="Some-main-codes"><a href="#Some-main-codes" class="headerlink" title="Some main codes"></a>Some main codes</h2><h3 id="Use-requests-to-analyze-the-url"><a href="#Use-requests-to-analyze-the-url" class="headerlink" title="Use requests to analyze the url"></a>Use requests to analyze the url</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&#x27;https://xxxxxxxxxxx&#x27;</span></span><br><span class="line">html = request_url(url)</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">test_print(soup)</span><br></pre></td></tr></table></figure>
<h3 id="change-location"><a href="#change-location" class="headerlink" title="change location"></a>change location</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new dir to store images</span></span><br><span class="line">dir_url = <span class="string">&#x27;./Python-Spider-to-Crawl-PangziTV/&#x27;</span></span><br><span class="line">os.makedirs(<span class="string">f&#x27;<span class="subst">&#123;dir_url&#125;</span>&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h2 id="some-main-methods"><a href="#some-main-methods" class="headerlink" title="some main methods"></a>some main methods</h2><h3 id="Get-specific-info-by-analyzing-the-HTML-code-of-website"><a href="#Get-specific-info-by-analyzing-the-HTML-code-of-website" class="headerlink" title="Get specific info by analyzing the HTML code of website"></a>Get specific info by analyzing the HTML code of website</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_print</span>(<span class="params">soup</span>):</span></span><br><span class="line">    <span class="comment"># find list info from panzitv.com, according to analyse site&#x27;s html</span></span><br><span class="line">    <span class="built_in">list</span> = soup.find(class_=<span class="string">&#x27;imglist02 cl&#x27;</span>).find_all(class_=<span class="string">&#x27;imgItemWrp&#x27;</span>)   </span><br><span class="line"></span><br><span class="line">    <span class="comment"># use global index</span></span><br><span class="line">    <span class="keyword">global</span> temp_index</span><br><span class="line">    <span class="comment"># to complete image url</span></span><br><span class="line">    image_pre = <span class="string">&#x27;https://www.pangzitv.com&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">        item_name = item.find(class_=<span class="string">&#x27;name&#x27;</span>).string</span><br><span class="line">        item_img_url = item.find(<span class="string">&#x27;a&#x27;</span>).find(<span class="string">&#x27;img&#x27;</span>).get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">        item_link = item.find(class_=<span class="string">&#x27;name&#x27;</span>).get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">        <span class="comment"># use f to change int type into string</span></span><br><span class="line">        temp_index = temp_index + <span class="number">1</span></span><br><span class="line">        print(<span class="string">f&#x27;Num <span class="subst">&#123;temp_index&#125;</span>&#x27;</span> + <span class="string">&#x27; | &#x27;</span>+ item_name + <span class="string">&#x27; | &#x27;</span> + item_img_url + <span class="string">&#x27; | &#x27;</span> + item_link )</span><br><span class="line">        <span class="comment"># set full image url to download        </span></span><br><span class="line">        image_url = image_pre + item_img_url</span><br><span class="line">        movie_link = image_pre + item_link</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request_download(image_url, temp_index)</span></span><br><span class="line">        <span class="comment"># show downloader progress bar and download sth</span></span><br><span class="line">        downloader_url(temp_index, image_url, item_img_url, item_name, dir_url, movie_link)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="save-text-file-method-can-modify-for-Hexo-Blog"><a href="#save-text-file-method-can-modify-for-Hexo-Blog" class="headerlink" title="save text file method (can modify for Hexo Blog)"></a>save text file method (can modify for Hexo Blog)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_info_txt</span>(<span class="params">temp_index, item_name, location_url, movie_link</span>):</span></span><br><span class="line">    my_file_name = <span class="string">&#x27;my_info_file.md&#x27;</span></span><br><span class="line">    <span class="comment"># add info in the back of the file, if not exist, create new file</span></span><br><span class="line">    my_info_file = <span class="built_in">open</span>(my_file_name, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    total_info = <span class="string">&#x27;### &#x27;</span> + <span class="built_in">str</span>(temp_index) + <span class="string">&#x27;: [&#x27;</span> + item_name + <span class="string">&#x27;](&#x27;</span> + movie_link +<span class="string">&#x27;)\n&#x27;</span> + <span class="string">&#x27;![](&#x27;</span> + location_url + <span class="string">&#x27;)\n&#x27;</span></span><br><span class="line">    my_info_file.write(total_info)</span><br><span class="line">    my_info_file.close()</span><br></pre></td></tr></table></figure>

<h3 id="download-images-method"><a href="#download-images-method" class="headerlink" title="download images method"></a>download images method</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># downloader method</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downloader_url</span>(<span class="params">temp_index, image_url, item_img_url, item_name, dir_url, movie_link</span>):</span></span><br><span class="line">    download_url = image_url</span><br><span class="line">    filename = item_img_url.split(<span class="string">&#x27;/&#x27;</span>)[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># save images</span></span><br><span class="line"></span><br><span class="line">    my_location = <span class="string">f&#x27;<span class="subst">&#123;dir_url&#125;</span>/<span class="subst">&#123;filename&#125;</span>&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># save info in text</span></span><br><span class="line">    <span class="comment"># Hexo Blog only needs filename, since it can find its director automatically!</span></span><br><span class="line">    location_url = <span class="string">f&#x27;<span class="subst">&#123;filename&#125;</span>&#x27;</span> <span class="comment"># need to change for markdown image is this format</span></span><br><span class="line">    save_info_txt(temp_index, item_name, location_url, movie_link)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># such image files (no txt file) use b to binary store</span></span><br><span class="line">    r = requests.get(download_url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(my_location, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(r.content)     </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="download-movies-methods"><a href="#download-movies-methods" class="headerlink" title="download movies methods"></a>download movies methods</h3><ul>
<li><input checked="" disabled="" type="checkbox"> trying solve download methods…</li>
<li><input checked="" disabled="" type="checkbox"> Get m3u8 encode link</li>
<li><input checked="" disabled="" type="checkbox"> decode by <code>base64decode</code> and <code>urllib-&gt;parse.unquote(str)</code></li>
<li><input checked="" disabled="" type="checkbox"> more practice <code>Regex</code> expression<ul>
<li><input checked="" disabled="" type="checkbox"> use <code>split</code> and <code>regex</code> to get valid <code>filename</code> and <code>url</code></li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> write <strong>non-txt</strong> file by <code>ab</code> which <code>b</code> means <code>binary</code></li>
<li><input checked="" disabled="" type="checkbox"> <code>debug</code> correct store path</li>
<li><input checked="" disabled="" type="checkbox"> download all <code>*.ts</code> file</li>
<li><input checked="" disabled="" type="checkbox"> <code>MacOs</code> : use <code>ffmpeg</code> to <code>merge</code> all <code>*.ts</code> files to <code>.mp4</code> file<ul>
<li><code>ffmpeg</code> use <code>brew install ffmpeg</code></li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> delete all <code>.ts</code> files after <code>merge</code> done</li>
<li><input checked="" disabled="" type="checkbox"> <code>fix</code> some <code>bugs</code> during running time</li>
<li><input checked="" disabled="" type="checkbox"> add <code>progress bar</code> function</li>
</ul>
<h3 id="Import-all-packages-by-python"><a href="#Import-all-packages-by-python" class="headerlink" title="Import all packages by python"></a>Import all packages by python</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> xlwt <span class="comment"># for execl file</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># import my class</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># sys.path.append(&#x27;需要作为模块引入的路径&#x27;)</span></span><br><span class="line"><span class="comment"># sys.path.append(&quot;./&quot;)</span></span><br><span class="line"><span class="keyword">import</span> re <span class="comment"># for regex</span></span><br><span class="line"><span class="keyword">import</span> base64 <span class="comment"># for base64decode</span></span><br><span class="line"><span class="comment"># import html # for unescape</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br></pre></td></tr></table></figure>

<h3 id="Some-codes-about-extract-and-download-‘-ts’-files-merge-them-and-delete-them"><a href="#Some-codes-about-extract-and-download-‘-ts’-files-merge-them-and-delete-them" class="headerlink" title="Some codes about extract and download ‘.ts’ files, merge them, and delete them"></a>Some codes about extract and download ‘.ts’ files, merge them, and delete them</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># implement download m3u8 files</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_m3u8_url_decode</span>(<span class="params">soup_my_url</span>):</span></span><br><span class="line">    <span class="comment"># find unescape url, use regex to find</span></span><br><span class="line">    <span class="built_in">list</span> = soup_my_url.find(class_=<span class="string">&#x27;clear pl-play js-addDanmu&#x27;</span>).find_all(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    <span class="comment"># print(list[0])</span></span><br><span class="line">    m3u8_file_name = soup_my_url.find(<span class="string">&#x27;h3&#x27;</span>).string</span><br><span class="line">    print(<span class="string">&#x27;File name: &#x27;</span> + m3u8_file_name)</span><br><span class="line">    <span class="comment"># create a dir</span></span><br><span class="line">    os.makedirs(<span class="string">f&#x27;<span class="subst">&#123;dir_download_url&#125;</span>/<span class="subst">&#123;m3u8_file_name&#125;</span>&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    file_path = <span class="string">f&#x27;<span class="subst">&#123;dir_download_url&#125;</span>/<span class="subst">&#123;m3u8_file_name&#125;</span>&#x27;</span></span><br><span class="line">    print(<span class="string">&#x27;[Create a new dir success!]&#x27;</span>)</span><br><span class="line">    <span class="comment"># spilt the encoded mac_url, list[0] is not a string type, re.findall returns a list</span></span><br><span class="line">    encode_url = re.findall(<span class="string">r&#x27;unescape\(base64decode\(.+\&#x27;&#x27;</span>, <span class="built_in">str</span>(<span class="built_in">list</span>[<span class="number">0</span>]), re.M | re.VERBOSE | re.DOTALL)</span><br><span class="line">    <span class="comment"># print(encode_url[0])</span></span><br><span class="line">    <span class="comment"># 1. split unescape(base64decode(, get mac_url including &#x27;&#x27; quote</span></span><br><span class="line">    split_encode_url = encode_url[<span class="number">0</span>].split(<span class="string">&#x27;unescape(base64decode(&#x27;</span>)[<span class="number">-1</span>]</span><br><span class="line">    <span class="comment"># print(split_encode_url)</span></span><br><span class="line">    <span class="comment"># 2. decode base64, then 3. unescape this url</span></span><br><span class="line">    decode_base64_url = base64.b64decode(split_encode_url)</span><br><span class="line">    <span class="comment"># print(decode_base64_url)</span></span><br><span class="line">    unescape_url = parse.unquote(<span class="built_in">str</span>(decode_base64_url))</span><br><span class="line">    <span class="comment"># print(unescape_url)</span></span><br><span class="line">    <span class="comment"># 4. need split again &#x27;#part 2$&#x27;</span></span><br><span class="line">    <span class="comment"># real_url = unescape_url.split(&#x27;#&#x27;)</span></span><br><span class="line">    <span class="comment"># print(real_url)</span></span><br><span class="line">    <span class="comment"># 5. use list to get all url</span></span><br><span class="line">    all_parts_list = []</span><br><span class="line">    <span class="comment"># for part_url in real_url:</span></span><br><span class="line">        <span class="comment"># add all elements into list</span></span><br><span class="line">        <span class="comment"># all_parts_list.append(part_url.split(&#x27;$&#x27;)[-1])</span></span><br><span class="line">    <span class="comment"># update 5: find all valid http url</span></span><br><span class="line">    all_parts_list = re.findall(<span class="string">r&#x27;(https:.*\.m3u8)&#x27;</span>, <span class="built_in">str</span>(unescape_url), re.M)</span><br><span class="line">    print(<span class="string">&#x27;[Debug] Download File parts: &#x27;</span>)</span><br><span class="line">    print(all_parts_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># get all ts files of m3u8</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_parts_list)):</span><br><span class="line">        all_parts_info = all_parts_list[i]</span><br><span class="line">        get_ts_files(all_parts_list[i], i, file_path)</span><br><span class="line">    <span class="comment"># get_ts_files(all_parts_list[0], 0, file_path)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_ts_files</span>(<span class="params">parts_info, i, file_path</span>):</span></span><br><span class="line">    <span class="comment"># create a dir</span></span><br><span class="line">    os.makedirs(<span class="string">f&#x27;<span class="subst">&#123;file_path&#125;</span>/<span class="subst">&#123;i&#125;</span>&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># find all info from m3u8_url</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># test_url = &#x27;https://cdn9.pztv.ca/upload/20210101/d6dfa215e40c638bfa04beae6d037adc/d6dfa215e40c638bfa04beae6d037adc.m3u8&#x27;</span></span><br><span class="line">    test_url = parts_info</span><br><span class="line">    print(test_url)</span><br><span class="line">    <span class="comment"># get content of test_url</span></span><br><span class="line">    all_content = request_url(test_url)</span><br><span class="line">    <span class="comment"># print(all_content)   </span></span><br><span class="line">    <span class="comment"># for line in file_line:</span></span><br><span class="line">        <span class="comment"># print(line)</span></span><br><span class="line">    <span class="comment"># write a m3u8 file</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&#x27;<span class="subst">&#123;file_path&#125;</span>/<span class="subst">&#123;i&#125;</span>/part<span class="subst">&#123;i&#125;</span>.m3u8&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(all_content)</span><br><span class="line">        print(<span class="string">&#x27;[success download m3u8]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># get each ts url</span></span><br><span class="line">    <span class="comment"># read each line</span></span><br><span class="line">    tslist = []</span><br><span class="line">    test_main_url = test_url</span><br><span class="line">    print(<span class="string">&#x27;[Test Url]: &#x27;</span> + test_main_url)</span><br><span class="line">    file_line = all_content.split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_line:</span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">&#x27;[^#]&#x27;</span>, line):</span><br><span class="line">            <span class="comment"># use regex to replace the last &#x27;/&#x27; content</span></span><br><span class="line">            <span class="comment"># print(line)</span></span><br><span class="line">            <span class="comment"># re.sub return a str</span></span><br><span class="line">            new_test_url = re.sub(<span class="string">r&#x27;[^\/]+(?!.*\/)&#x27;</span>, <span class="string">f&#x27;<span class="subst">&#123;line&#125;</span>&#x27;</span>, test_main_url)</span><br><span class="line">            <span class="comment"># print(new_test_url)</span></span><br><span class="line">            tslist.append(<span class="string">f&#x27;<span class="subst">&#123;new_test_url&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="comment"># print(line[-6:]) # get string from end, has bug for diff length of xxx.ts, xxxx.ts</span></span><br><span class="line">    <span class="comment"># print(tslist)</span></span><br><span class="line">    print(<span class="string">&#x27;[Num tslist]: &#x27;</span> + <span class="built_in">str</span>(<span class="built_in">len</span>(tslist)))</span><br><span class="line">    <span class="comment"># ask if it starts downloading</span></span><br><span class="line">    ask_start = <span class="built_in">input</span>(<span class="string">&#x27;Would you like to download now? (y/n): \n&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ask_start == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">        <span class="comment"># download each ts file</span></span><br><span class="line">        download_ts_files(tslist, file_path, i)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># no download</span></span><br><span class="line">        print(<span class="string">&#x27;you can download later...&#x27;</span>)</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># download each ts file</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_ts_files</span>(<span class="params">tslist, file_path, i</span>):</span></span><br><span class="line">    <span class="keyword">for</span> item_ts <span class="keyword">in</span> tslist:</span><br><span class="line">        ts_name = item_ts.split(<span class="string">&#x27;/&#x27;</span>)[<span class="number">-1</span>]</span><br><span class="line">        <span class="comment"># download file path</span></span><br><span class="line">        ts_file_path = <span class="string">f&#x27;<span class="subst">&#123;file_path&#125;</span>/<span class="subst">&#123;i&#125;</span>/<span class="subst">&#123;ts_name&#125;</span>&#x27;</span></span><br><span class="line">        <span class="comment"># call request content method</span></span><br><span class="line">        print(<span class="string">&#x27;[Prepare File Name]: &#x27;</span> + <span class="string">f&#x27;<span class="subst">&#123;ts_name&#125;</span>&#x27;</span>)</span><br><span class="line">        request_url_content(item_ts, ts_file_path)</span><br><span class="line">        <span class="comment"># print(&#x27;[downloaded]&#x27; + f&#x27;&#123;ts_name&#125;&#x27;)</span></span><br><span class="line">        <span class="comment"># create new file</span></span><br><span class="line">        <span class="comment"># with open(f&#x27;&#123;file_path&#125;/&#123;i&#125;/&#123;ts_name&#125;&#x27;, &#x27;ab&#x27;) as f:</span></span><br><span class="line">        <span class="comment">#     f.write(ts_content)</span></span><br><span class="line">        <span class="comment">#     print(&#x27;[success download]&#x27; + f&#x27;&#123;ts_name&#125;&#x27;)</span></span><br><span class="line">    <span class="comment"># when finish, ask if start merge ts file</span></span><br><span class="line">    is_merge = <span class="built_in">input</span>(<span class="string">&#x27;Downloaded all ts files, start merge now? (y/n)\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_merge == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">        <span class="comment"># call merge method</span></span><br><span class="line">        merge_file_name = <span class="string">f&#x27;part<span class="subst">&#123;i&#125;</span>&#x27;</span></span><br><span class="line">        new_file_path = <span class="string">f&#x27;<span class="subst">&#123;file_path&#125;</span>/<span class="subst">&#123;i&#125;</span>/&#x27;</span></span><br><span class="line">        merge_ts(new_file_path, merge_file_name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;Finished, you can use merge_ts.py to merge them later!\n&#x27;</span>)</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># merge ts file method</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_ts</span>(<span class="params">new_file_path, merge_file_name</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        use cmd to merge file</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tsPath = new_file_path</span><br><span class="line"></span><br><span class="line">    <span class="comment">#获取所有的ts文件</span></span><br><span class="line">    path_list = os.listdir(<span class="string">f&#x27;<span class="subst">&#123;tsPath&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="comment">#对文件进行排序并将排序后的ts文件路径放入列表中</span></span><br><span class="line">    path_list.sort()</span><br><span class="line">    li = [os.path.join(tsPath,filename) <span class="keyword">for</span> filename <span class="keyword">in</span> path_list <span class="keyword">if</span> <span class="string">&#x27;.ts&#x27;</span> <span class="keyword">in</span> filename]</span><br><span class="line">    <span class="comment">#将ts路径并合成一个字符参数</span></span><br><span class="line">    tsfiles = <span class="string">&#x27;|&#x27;</span>.join(li)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(tsfiles)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#指定输出文件名称</span></span><br><span class="line">    saveMp4file = tsPath + <span class="string">f&#x27;<span class="subst">&#123;merge_file_name&#125;</span>.mp4&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#调取系统命令使用ffmpeg将ts合成mp4文件</span></span><br><span class="line">    cmd = <span class="string">&#x27;ffmpeg -i &quot;concat:%s&quot; -acodec copy -vcodec copy -absf aac_adtstoasc %s&#x27;</span>% (tsfiles,saveMp4file)</span><br><span class="line">    os.system(cmd)</span><br><span class="line">    <span class="comment"># check if delete ts files</span></span><br><span class="line">    delete_file = <span class="built_in">input</span>(<span class="string">&#x27;Would you like to delete all ts files? (y/n): \n&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> delete_file == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">        remove_ts(tsPath)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;you can delete later......&#x27;</span>)</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove_ts</span>(<span class="params">tsPath</span>):</span></span><br><span class="line">    <span class="keyword">for</span> inline <span class="keyword">in</span> glob.glob(os.path.join(tsPath, <span class="string">&#x27;*.ts&#x27;</span>)):</span><br><span class="line">        os.remove(inline)</span><br><span class="line">    print(<span class="string">&#x27;finish delete ts files!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="some-advices"><a href="#some-advices" class="headerlink" title="some advices"></a>some advices</h2><ul>
<li>run python file to update info from website</li>
<li>copy markdown file into blog</li>
<li>need delete my_info_file, since it will be generated a Blog</li>
<li>monthly or daily to update my_info_file</li>
</ul>
<h2 id="Demo-Crawling-movies-list-links-and-images-of-1-page"><a href="#Demo-Crawling-movies-list-links-and-images-of-1-page" class="headerlink" title="Demo Crawling movies list, links, and images of 1 page"></a>Demo Crawling movies list, links, and images of 1 page</h2><h3 id="1-延禧攻略HD"><a href="#1-延禧攻略HD" class="headerlink" title="1: 延禧攻略HD"></a>1: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-25904.html">延禧攻略HD</a></h3><p><img src="201807201532040514.png"></p>
<h3 id="2-如懿传HD"><a href="#2-如懿传HD" class="headerlink" title="2: 如懿传HD"></a>2: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-26324.html">如懿传HD</a></h3><p><img src="201808211534800972.png"></p>
<h3 id="3-扶摇"><a href="#3-扶摇" class="headerlink" title="3: 扶摇"></a>3: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-25364.html">扶摇</a></h3><p><img src="201806191529378940.jpg"></p>
<h3 id="4-知否？知否？应是绿肥红瘦-DVD版"><a href="#4-知否？知否？应是绿肥红瘦-DVD版" class="headerlink" title="4: 知否？知否？应是绿肥红瘦 DVD版"></a>4: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-28678.html">知否？知否？应是绿肥红瘦 DVD版</a></h3><p><img src="201812261545763914.jpg"></p>
<h3 id="5-皓镧传-DVD"><a href="#5-皓镧传-DVD" class="headerlink" title="5: 皓镧传 DVD"></a>5: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-29636.html">皓镧传 DVD</a></h3><p><img src="201901201547929676.jpg"></p>
<h3 id="6-庆余年-1080P蓝光"><a href="#6-庆余年-1080P蓝光" class="headerlink" title="6: 庆余年 1080P蓝光"></a>6: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-56675.html">庆余年 1080P蓝光</a></h3><p><img src="15748790550.jpg"></p>
<h3 id="7-那年花开月正圆"><a href="#7-那年花开月正圆" class="headerlink" title="7: 那年花开月正圆"></a>7: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-21478.html">那年花开月正圆</a></h3><p><img src="201709011504241064.jpg"></p>
<h3 id="8-倚天屠龙记"><a href="#8-倚天屠龙记" class="headerlink" title="8: 倚天屠龙记"></a>8: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-33240.html">倚天屠龙记</a></h3><p><img src="15513122621.jpg"></p>
<h3 id="9-都挺好"><a href="#9-都挺好" class="headerlink" title="9: 都挺好"></a>9: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-33416.html">都挺好</a></h3><p><img src="15514658765.jpg"></p>
<h3 id="10-封神演义DVD-1080P"><a href="#10-封神演义DVD-1080P" class="headerlink" title="10: 封神演义DVD 1080P"></a>10: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-37192.html">封神演义DVD 1080P</a></h3><p><img src="15547724202.jpg"></p>
<h3 id="11-将夜1-DVD"><a href="#11-将夜1-DVD" class="headerlink" title="11: 将夜1 DVD"></a>11: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-27561.html">将夜1 DVD</a></h3><p><img src="201811011541022964.jpg"></p>
<h3 id="12-琅琊榜之风起长林"><a href="#12-琅琊榜之风起长林" class="headerlink" title="12: 琅琊榜之风起长林"></a>12: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-22646.html">琅琊榜之风起长林</a></h3><p><img src="201712191513658576.jpg"></p>
<h3 id="13-盗墓笔记少年篇之沙海"><a href="#13-盗墓笔记少年篇之沙海" class="headerlink" title="13: 盗墓笔记少年篇之沙海"></a>13: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-25917.html">盗墓笔记少年篇之沙海</a></h3><p><img src="201807211532113573.jpg"></p>
<h3 id="14-小欢喜"><a href="#14-小欢喜" class="headerlink" title="14: 小欢喜"></a>14: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-46923.html">小欢喜</a></h3><p><img src="15646830571.jpg"></p>
<h3 id="15-宸汐缘"><a href="#15-宸汐缘" class="headerlink" title="15: 宸汐缘"></a>15: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-45626.html">宸汐缘</a></h3><p><img src="15632576354.jpg"></p>
<h3 id="16-陈情令"><a href="#16-陈情令" class="headerlink" title="16: 陈情令"></a>16: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-44493.html">陈情令</a></h3><p><img src="156171055418.jpg"></p>
<h3 id="17-古董局中局-DVD版"><a href="#17-古董局中局-DVD版" class="headerlink" title="17: 古董局中局 DVD版"></a>17: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-28712.html">古董局中局 DVD版</a></h3><p><img src="201812271545869558.jpg"></p>
<h3 id="18-白发-白发皇妃-白发王妃"><a href="#18-白发-白发皇妃-白发王妃" class="headerlink" title="18: 白发/白发皇妃/白发王妃"></a>18: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-40762.html">白发/白发皇妃/白发王妃</a></h3><p><img src="201906291561744723.jpg"></p>
<h3 id="19-小女花不弃-DVD"><a href="#19-小女花不弃-DVD" class="headerlink" title="19: 小女花不弃 DVD"></a>19: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-29128.html">小女花不弃 DVD</a></h3><p><img src="201901091546974415.jpg"></p>
<h3 id="20-一起同过窗-第二季"><a href="#20-一起同过窗-第二季" class="headerlink" title="20: 一起同过窗 第二季"></a>20: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-22457.html">一起同过窗 第二季</a></h3><p><img src="201712011512104966.jpg"></p>
<h3 id="21-三生三世十里桃花"><a href="#21-三生三世十里桃花" class="headerlink" title="21: 三生三世十里桃花"></a>21: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-18197.html">三生三世十里桃花</a></h3><p><img src="201701241485229337.jpg"></p>
<h3 id="22-全职高手"><a href="#22-全职高手" class="headerlink" title="22: 全职高手"></a>22: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-46370.html">全职高手</a></h3><p><img src="156400224713.jpg"></p>
<h3 id="23-九州海上牧云记"><a href="#23-九州海上牧云记" class="headerlink" title="23: 九州海上牧云记"></a>23: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-22358.html">九州海上牧云记</a></h3><p><img src="201711221511329603.jpg"></p>
<h3 id="24-黄金瞳"><a href="#24-黄金瞳" class="headerlink" title="24: 黄金瞳"></a>24: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-33239.html">黄金瞳</a></h3><p><img src="201903021551474745.jpg"></p>
<h3 id="25-烈火如歌"><a href="#25-烈火如歌" class="headerlink" title="25: 烈火如歌"></a>25: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-23767.html">烈火如歌</a></h3><p><img src="201803021519968421.jpg"></p>
<h3 id="26-亲爱的，热爱的"><a href="#26-亲爱的，热爱的" class="headerlink" title="26: 亲爱的，热爱的"></a>26: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-45216.html">亲爱的，热爱的</a></h3><p><img src="15646830780.jpg"></p>
<h3 id="27-大江大河-DVD版"><a href="#27-大江大河-DVD版" class="headerlink" title="27: 大江大河 DVD版"></a>27: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-28293.html">大江大河 DVD版</a></h3><p><img src="201812111544480404.jpg"></p>
<h3 id="28-东宫"><a href="#28-东宫" class="headerlink" title="28: 东宫"></a>28: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-31912.html">东宫</a></h3><p><img src="15501778230.jpg"></p>
<h3 id="29-盗墓笔记2之怒海潜沙-amp-秦岭神树"><a href="#29-盗墓笔记2之怒海潜沙-amp-秦岭神树" class="headerlink" title="29: 盗墓笔记2之怒海潜沙&amp;秦岭神树"></a>29: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-42946.html">盗墓笔记2之怒海潜沙&amp;秦岭神树</a></h3><p><img src="201906291561743868.jpg"></p>
<h3 id="30-河神1"><a href="#30-河神1" class="headerlink" title="30: 河神1"></a>30: <a target="_blank" rel="noopener" href="https://www.pangzitv.com/vod-detail-id-20921.html">河神1</a></h3><p><img src="201707291501306951.jpg"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Python Spider to Crawl PangziTV</p><p><a href="https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/">https://bestbonbai.github.io/2021/01/02/Python-Spider-to-Crawl-PangziTV/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><a href="https://BestBonBai.github.io"><p>BestBonBai</p></a></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-01-02</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-01-08</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># Recommend Post</span><br><span>  1.<a class="is-size-6" href="/2021/01/08/use-hexo-theme-icarus/" target="_blank">use hexo theme icarus</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.png" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/Wechat.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/01/08/use-hexo-theme-icarus/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">use hexo theme icarus</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/12/26/git-cheat-sheet/"><span class="level-item">git-cheat-sheet</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">Comments</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'en',
            id: '279114bd0f43d2669cb0e14ce3f672f5',
            repo: 'BestBonBai.github.io',
            owner: 'BestBonBai',
            clientID: '351d88f9c2ba76a62b8e',
            clientSecret: '0393ece8e2726639cd3aba30c379297c758ad525',
            admin: ["BestBonBai"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Web-spider"><span>Web spider</span></a></li><li><a class="is-flex is-mobile" href="#Install-instruction-for-Mac"><span>Install instruction for Mac</span></a></li><li><a class="is-flex is-mobile" href="#Don’t-forget-to-fake-headers"><span>Don’t forget to fake headers</span></a></li><li><a class="is-flex is-mobile" href="#Some-main-codes"><span>Some main codes</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Use-requests-to-analyze-the-url"><span>Use requests to analyze the url</span></a></li><li><a class="is-flex is-mobile" href="#change-location"><span>change location</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#some-main-methods"><span>some main methods</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Get-specific-info-by-analyzing-the-HTML-code-of-website"><span>Get specific info by analyzing the HTML code of website</span></a></li><li><a class="is-flex is-mobile" href="#save-text-file-method-can-modify-for-Hexo-Blog"><span>save text file method (can modify for Hexo Blog)</span></a></li><li><a class="is-flex is-mobile" href="#download-images-method"><span>download images method</span></a></li><li><a class="is-flex is-mobile" href="#download-movies-methods"><span>download movies methods</span></a></li><li><a class="is-flex is-mobile" href="#Import-all-packages-by-python"><span>Import all packages by python</span></a></li><li><a class="is-flex is-mobile" href="#Some-codes-about-extract-and-download-‘-ts’-files-merge-them-and-delete-them"><span>Some codes about extract and download ‘.ts’ files, merge them, and delete them</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#some-advices"><span>some advices</span></a></li><li><a class="is-flex is-mobile" href="#Demo-Crawling-movies-list-links-and-images-of-1-page"><span>Demo Crawling movies list, links, and images of 1 page</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#1-延禧攻略HD"><span>1: 延禧攻略HD</span></a></li><li><a class="is-flex is-mobile" href="#2-如懿传HD"><span>2: 如懿传HD</span></a></li><li><a class="is-flex is-mobile" href="#3-扶摇"><span>3: 扶摇</span></a></li><li><a class="is-flex is-mobile" href="#4-知否？知否？应是绿肥红瘦-DVD版"><span>4: 知否？知否？应是绿肥红瘦 DVD版</span></a></li><li><a class="is-flex is-mobile" href="#5-皓镧传-DVD"><span>5: 皓镧传 DVD</span></a></li><li><a class="is-flex is-mobile" href="#6-庆余年-1080P蓝光"><span>6: 庆余年 1080P蓝光</span></a></li><li><a class="is-flex is-mobile" href="#7-那年花开月正圆"><span>7: 那年花开月正圆</span></a></li><li><a class="is-flex is-mobile" href="#8-倚天屠龙记"><span>8: 倚天屠龙记</span></a></li><li><a class="is-flex is-mobile" href="#9-都挺好"><span>9: 都挺好</span></a></li><li><a class="is-flex is-mobile" href="#10-封神演义DVD-1080P"><span>10: 封神演义DVD 1080P</span></a></li><li><a class="is-flex is-mobile" href="#11-将夜1-DVD"><span>11: 将夜1 DVD</span></a></li><li><a class="is-flex is-mobile" href="#12-琅琊榜之风起长林"><span>12: 琅琊榜之风起长林</span></a></li><li><a class="is-flex is-mobile" href="#13-盗墓笔记少年篇之沙海"><span>13: 盗墓笔记少年篇之沙海</span></a></li><li><a class="is-flex is-mobile" href="#14-小欢喜"><span>14: 小欢喜</span></a></li><li><a class="is-flex is-mobile" href="#15-宸汐缘"><span>15: 宸汐缘</span></a></li><li><a class="is-flex is-mobile" href="#16-陈情令"><span>16: 陈情令</span></a></li><li><a class="is-flex is-mobile" href="#17-古董局中局-DVD版"><span>17: 古董局中局 DVD版</span></a></li><li><a class="is-flex is-mobile" href="#18-白发-白发皇妃-白发王妃"><span>18: 白发/白发皇妃/白发王妃</span></a></li><li><a class="is-flex is-mobile" href="#19-小女花不弃-DVD"><span>19: 小女花不弃 DVD</span></a></li><li><a class="is-flex is-mobile" href="#20-一起同过窗-第二季"><span>20: 一起同过窗 第二季</span></a></li><li><a class="is-flex is-mobile" href="#21-三生三世十里桃花"><span>21: 三生三世十里桃花</span></a></li><li><a class="is-flex is-mobile" href="#22-全职高手"><span>22: 全职高手</span></a></li><li><a class="is-flex is-mobile" href="#23-九州海上牧云记"><span>23: 九州海上牧云记</span></a></li><li><a class="is-flex is-mobile" href="#24-黄金瞳"><span>24: 黄金瞳</span></a></li><li><a class="is-flex is-mobile" href="#25-烈火如歌"><span>25: 烈火如歌</span></a></li><li><a class="is-flex is-mobile" href="#26-亲爱的，热爱的"><span>26: 亲爱的，热爱的</span></a></li><li><a class="is-flex is-mobile" href="#27-大江大河-DVD版"><span>27: 大江大河 DVD版</span></a></li><li><a class="is-flex is-mobile" href="#28-东宫"><span>28: 东宫</span></a></li><li><a class="is-flex is-mobile" href="#29-盗墓笔记2之怒海潜沙-amp-秦岭神树"><span>29: 盗墓笔记2之怒海潜沙&amp;秦岭神树</span></a></li><li><a class="is-flex is-mobile" href="#30-河神1"><span>30: 河神1</span></a></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/linglong.jpg" alt="BestBonBai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">BestBonBai</p><p class="is-size-6 is-block">Just do it!</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Montréal, QC, Canada</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">12</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/BestBonBai" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/BestBonBai"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:jsbaihualin@hotmail.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Next" href="https://BestBonBai.github.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="//www.facebook.com/barry.bai.315/"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="linkedin" href="//www.linkedin.com/in/hualin-bai-841759103/"><i class="fab fa-linkedin"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://google.ca" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Google</span></span><span class="level-right"><span class="level-item tag">google.ca</span></span></a></li><li><a class="level is-mobile" href="/404.html" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">404Charity</span></span><span class="level-right"><span class="level-item tag">/404.html</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Latest Comment</h3><span class="body_hot_comment">Loading...Wait a Minute!</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-08T22:14:18.000Z">2021-01-08</time></p><p class="title"><a href="/2021/01/08/use-hexo-theme-icarus/">use hexo theme icarus</a></p><p class="categories"><a href="/categories/hexo-theme/">hexo-theme</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-02T12:36:31.000Z">2021-01-02</time></p><p class="title"><a href="/2021/01/02/Python-Spider-to-Crawl-PangziTV/">Python Spider to Crawl PangziTV</a></p><p class="categories"><a href="/categories/python/">python</a> / <a href="/categories/python/spider/">spider</a> / <a href="/categories/python/spider/funny/">funny</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-26T22:39:54.000Z">2020-12-26</time></p><p class="title"><a href="/2020/12/26/git-cheat-sheet/">git-cheat-sheet</a></p><p class="categories"><a href="/categories/notes/">notes</a> / <a href="/categories/notes/cheatsheet/">cheatsheet</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-25T06:06:30.000Z">2020-10-25</time></p><p class="title"><a href="/2020/10/25/Markdown-notes/">Markdown notes</a></p><p class="categories"><a href="/categories/Markdown/">Markdown</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-24T16:38:16.000Z">2020-10-24</time></p><p class="title"><a href="/2020/10/24/C-midterm-review/">C++ midterm review</a></p><p class="categories"><a href="/categories/tech/">tech</a> / <a href="/categories/tech/c/">c++</a> / <a href="/categories/tech/c/midterm/">midterm</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Database/SQL/"><span class="level-start"><span class="level-item">SQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Database/SQL/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Markdown/"><span class="level-start"><span class="level-item">Markdown</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/hexo-theme/"><span class="level-start"><span class="level-item">hexo-theme</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/notes/"><span class="level-start"><span class="level-item">notes</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/notes/cheatsheet/"><span class="level-start"><span class="level-item">cheatsheet</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/python/spider/"><span class="level-start"><span class="level-item">spider</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/python/spider/funny/"><span class="level-start"><span class="level-item">funny</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Crawl/"><span class="tag">Crawl</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Database/"><span class="tag">Database</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo-Theme/"><span class="tag">Hexo-Theme</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spider/"><span class="tag">Spider</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cheatsheet/"><span class="tag">cheatsheet</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo-theme/"><span class="tag">hexo-theme</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/bai-logo2.png" alt="BestBonBai" height="28"></a><p class="size-small"><span>&copy; 2021 BestBonBai</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© Copyright for All articles with <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">free share licence</a><br/></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️Site from <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> has existed <strong>" + dnum + "</strong> d <strong>" + hnum + "</strong> h <strong>" + mnum + "</strong> m <strong>" + snum + "</strong> s！❤️";
        }var now = new Date();setInterval("createTime('2020/10/21 10:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️Thx <strong><span id="busuanzi_value_site_uv"></span></strong> users <strong><span id="busuanzi_value_site_pv"></span></strong> visited！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('351d88f9c2ba76a62b8e','0393ece8e2726639cd3aba30c379297c758ad525','BestBonBai','BestBonBai.github.io',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('351d88f9c2ba76a62b8e','0393ece8e2726639cd3aba30c379297c758ad525','BestBonBai','BestBonBai.github.io',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/model1.model.json"},"display":{"position":"right","width":190,"height":280},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body></html>